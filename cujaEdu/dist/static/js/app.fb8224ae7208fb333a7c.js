webpackJsonp([1],{"3wY0":function(t,e){},"5Q20":function(t,e){},"6B5G":function(t,e){},"8sJK":function(t,e){},"9M+g":function(t,e){},BWpV:function(t,e){},"FY/j":function(t,e){},JjH1:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),s=o("kxiW"),a=o.n(s),r=o("/ocq"),i=o("mtWM"),l=o.n(i),c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-navbar",{staticClass:"cujaNav",attrs:{toggleable:"lg",type:"dark"}},[o("b-navbar-toggle",{attrs:{target:"nav_text_collapse"}}),t._v(" "),o("b-collapse",{attrs:{"is-nav":"",id:"nav_text_collapse"}},[o("b-navbar-nav",[o("router-link",{staticClass:"nav-link",attrs:{to:"/home"}},[o("b-nav-text",{staticClass:"navText"},[t._v("Dashboard")])],1),t._v(" "),"instructor"===t.profile.role?o("router-link",{staticClass:"nav-link",attrs:{to:"/instructor"}},[o("b-nav-text",{staticClass:"navText"},[t._v("Instructor")])],1):t._e()],1)],1),t._v(" "),o("b-navbar-brand",{staticClass:"profileTrigger"},[t.profile.email?t._e():o("router-link",{attrs:{to:"/login"}},[o("b-nav-text",{staticClass:"navText"},[t._v("Login")])],1),t._v(" "),o("router-link",{staticClass:"navText",attrs:{to:"/profile"}},[o("span",{staticClass:"displayName"},[t._v(t._s(t.profile.displayName?t.profile.displayName:t.profile.email))])]),t._v(" "),t.profile.photoURL?o("b-img",{staticClass:"thumbnail",attrs:{alt:"Circle image",src:t.profile.photoURL}}):t._e()],1)],1)},staticRenderFns:[]};var u={name:"Footer",data:function(){return{}},methods:{logout:function(){a.a.auth().signOut().then(function(){alert("Signed Out!")}).catch(function(t){alert("An Error occured: ",t)}),this.$store.commit("clearUser"),this.$router.push("/login")}},computed:{profile:function(){return this.$store.state.profile}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{attrs:{id:"footer"}},[this.profile.email?e("b-link",{on:{click:this.logout}},[this._v("Logout")]):this._e()],1)},staticRenderFns:[]};var p={name:"App",components:{Nav:o("VU/8")({name:"Nav",data:function(){return{}},computed:{profile:function(){return this.$store.state.profile}}},c,!1,function(t){o("mLJW")},"data-v-8ef0e8e6",null).exports,Footer:o("VU/8")(u,d,!1,function(t){o("FY/j")},"data-v-1d7c0586",null).exports}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Nav"),this._v(" "),e("router-view",{staticStyle:{margin:"2% 5%"}}),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var f=o("VU/8")(p,m,!1,function(t){o("5Q20")},null,null).exports,h={name:"Home",data:function(){return{profile:{}}},methods:{logout:function(){a.a.auth().signOut().then(function(){alert("Signed Out!")}).catch(function(t){alert("An Error occured: ",t)}),this.$store.commit("clearUser"),this.$router.push("/login")}},created:function(){}},g={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h4",{staticClass:"title"},[this._v("Dashboard")])])}]};var v=o("VU/8")(h,g,!1,function(t){o("U5p3")},"data-v-172d09cb",null).exports,b=o("Dd8w"),_=o.n(b),C=new a.a.auth.GoogleAuthProvider;C.addScope("https://www.googleapis.com/auth/contacts.readonly"),C.setCustomParameters({login_hint:"user@example.com"});var w={name:"Login",data:function(){return{username:"",pw:""}},methods:{login:function(){var t=this.$store,e=this.$router,o=a.a.firestore();a.a.auth().signInWithEmailAndPassword(this.username,this.pw).then(function(n){console.log("Acces Token for Google API",n);var s=n.user,a=s.displayName,r=s.email,i=s.photoURL,l=s.phoneNumber,c=s.uid;o.collection("users").doc(c).get().then(function(o){if(o.exists){var n=_()({uid:c,email:r,displayName:a,photoURL:i,phoneNumber:l},o.data());console.log("Profile data:",n),t.commit("setUser",n),e.push("home"),alert("You are now authenticated")}else console.log("No such document!")}).catch(function(t){t.code;var e=t.message;console.log("Error:",e)})})},googleSignIn:function(){var t=this.$router,e=this.$store,o=a.a.firestore();a.a.auth().signInWithPopup(C).then(function(n){var s=n.credential.accessToken,a=n.user,r=a.displayName,i=a.email,l=a.photoURL,c=a.phoneNumber,u=a.uid,d=o.collection("users").doc(u);d.get().then(function(o){if(o.exists){console.log("Document data:",o.data());var n=_()({uid:u,token:s,email:i,displayName:r,photoURL:l,phoneNumber:c},o.data());e.commit("setUser",n),t.push("home")}else d.set({role:"student"}).then(function(){console.log("Document successfully written!"),d.get().then(function(t){if(t.exists){var o=_()({uid:u,email:i,displayName:r,photoURL:l,phoneNumber:c},t.data());e.commit("setUser",o)}else console.error("Error writing document: ",error)})}).catch(function(t){console.error("Error writing document: ",t)})}).catch(function(t){console.log("Error getting document:",t)}),t.push("home")}).catch(function(t){t.code;var e=t.message;t.email,t.credential;console.log("Google Error: ",e)})}}},y={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h1",[t._v("Login")]),t._v(" "),o("b-container",[o("b-form-row",[o("b-form-input",{staticClass:"m-2",attrs:{type:"text",placeholder:"Enter your Mail-Adress"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),o("b-form-row",[o("b-form-input",{staticClass:"m-2",attrs:{type:"text",placeholder:"Enter your Password"},model:{value:t.pw,callback:function(e){t.pw=e},expression:"pw"}})],1),t._v(" "),o("b-form-row",{staticClass:"loginButton m-2"},[o("b-button",{staticClass:"button",on:{click:t.login}},[t._v("Login")])],1),t._v(" "),o("b-form-row",{staticClass:"loginButton m-2"},[o("div",{staticClass:"googleLogin"},[o("b-button",{staticClass:"button",attrs:{id:"googleButton"},on:{click:t.googleSignIn}},[t._v("Google sign in")]),t._v(" "),o("img",{attrs:{id:"googleLogo",src:"http://pngimg.com/uploads/google/google_PNG19635.png",alt:"google logo"}})],1)]),t._v(" "),o("span",[t._v("Not registered? "),o("router-link",{attrs:{to:"/register"}},[o("b-nav-text",{staticClass:"navText"},[t._v("Create Account")])],1)],1)],1)],1)},staticRenderFns:[]};var x=o("VU/8")(w,y,!1,function(t){o("6B5G")},"data-v-6eaf6232",null).exports,N={name:"Register",data:function(){return{email:"",pw:"",organisation:"",first:"",last:"",city:"",displayName:"",phoneNumber:""}},methods:{register:function(){var t=this.$router,e=a.a.firestore(),o=this;a.a.auth().createUserWithEmailAndPassword(this.email,this.pw).then(function(n){var s=n.user.uid;n.user.updateProfile({displayName:o.first+" "+o.last||"unset",phoneNumber:o.phoneNumber||"unset"}),e.collection("users").doc(s).set({role:"student",first:o.first||"unset",last:o.last||"unset",city:o.city||"unset",organisation:o.organisation||"unset"}).then(function(e){console.log("User Document written with ID: ",e),alert("User Registered!"),t.push("login")}).catch(function(t){console.error("Error adding User document: ",t)})}).catch(function(t){var e=t.code,o=t.message;"auth/weak-password"==e?alert("The password is too weak."):alert(o),console.log(t)})}}},U={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h1",[t._v("Register")]),t._v(" "),o("b-container",[o("b-form-row",[o("b-form-input",{staticClass:"m-2",attrs:{type:"text",placeholder:"Enter your Mail-Adress"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),o("b-form-row",[o("b-form-input",{staticClass:"m-2",attrs:{type:"text",placeholder:"Enter your Password"},model:{value:t.pw,callback:function(e){t.pw=e},expression:"pw"}})],1),t._v(" "),o("b-form-row",[o("b-form-input",{staticClass:"m-2",attrs:{type:"text",placeholder:"Enter your Organisation"},model:{value:t.organisation,callback:function(e){t.organisation=e},expression:"organisation"}})],1),t._v(" "),o("b-form-row",[o("b-form-input",{staticClass:"m-2",attrs:{type:"text",placeholder:"Enter your First Name"},model:{value:t.first,callback:function(e){t.first=e},expression:"first"}})],1),t._v(" "),o("b-form-row",[o("b-form-input",{staticClass:"m-2",attrs:{type:"text",placeholder:"Enter your Last Name"},model:{value:t.last,callback:function(e){t.last=e},expression:"last"}})],1),t._v(" "),o("b-form-row",[o("b-form-input",{staticClass:"m-2",attrs:{type:"text",placeholder:"Enter the City you live in"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1),t._v(" "),o("b-form-row",[o("b-form-input",{staticClass:"m-2",attrs:{type:"text",placeholder:"Enter your Phone Number"},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber=e},expression:"phoneNumber"}})],1),t._v(" "),o("b-form-row",{staticClass:"loginButton m-2"},[o("b-button",{staticClass:"button",on:{click:t.register}},[t._v("Register")])],1)],1)],1)},staticRenderFns:[]};var E=o("VU/8")(N,U,!1,function(t){o("tZnG")},"data-v-e9de7efe",null).exports,L={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h4",{staticClass:"title"},[t._v("Profile")]),t._v(" "),o("b-img",{staticClass:"thumbnail",staticStyle:{width:"6em",height:"6em"},attrs:{alt:"Circle image",src:this.$store.state.profile.photoURL?this.$store.state.profile.photoURL:"http://www.stleos.uq.edu.au/wp-content/uploads/2016/08/image-placeholder-350x350.png"}}),t._v(" "),o("div",{staticClass:"entry"},[o("h5",[t._v("Display Name: ")]),t._v(" "),o("span",[t._v(t._s(t.profile.displayName?t.profile.displayName:t.profile.email))])]),t._v(" "),o("div",{staticClass:"entry"},[o("h5",[t._v("Role: ")]),t._v(" "),o("span",[t._v(t._s(t.profile.role))])]),t._v(" "),o("div",{staticClass:"entry"},[o("h5",[t._v("Surname: ")]),t._v(" "),o("span",[t._v(t._s(t.profile.last))])]),t._v(" "),o("div",{staticClass:"entry"},[o("h5",[t._v("Name: ")]),t._v(" "),o("span",[t._v(t._s(t.profile.first))])]),t._v(" "),o("div",{staticClass:"entry"},[o("h5",[t._v("Location: ")]),t._v(" "),o("span",[t._v(t._s(t.profile.city))])]),t._v(" "),o("div",{staticClass:"entry"},[o("h5",[t._v("Organisation: ")]),t._v(" "),o("span",[t._v(t._s(t.profile.organisation))])])],1)},staticRenderFns:[]};var k=o("VU/8")({name:"Profile",data:function(){return{}},computed:{profile:function(){return this.$store.state.profile}}},L,!1,function(t){o("Wwdf")},"data-v-853fa6ee",null).exports,R={name:"Students",data:function(){return{profile:{},loading:!1,students:[],fields:{UID:{label:"UID",sortable:!0},last:{label:"Last Name",sortable:!0},first:{label:"First name",sortable:!1},city:{label:"City",sortable:!0},organisation:{label:"Partner",sortable:!0}}}},methods:{getStudents:function(){this.toggleLoading();var t=this;a.a.firestore().collection("users").where("role","==","student").get().then(function(e){e.docs.map(function(e){t.students.push(e.data());var o=t.students.length-1;t.students[o].UID=e.id}),t.toggleLoading()}).catch(function(t){console.log("Error getting documents: ",t)})},toggleLoading:function(){this.loading=!this.loading}},created:function(){this.getStudents()}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("b-table",{attrs:{striped:"",hover:"",small:"",items:this.students,fields:this.fields}}),this._v(" "),this.loading?e("div",{staticClass:"text-center"},[e("b-spinner",{staticClass:"cuja",attrs:{label:"Spinning"}})],1):this._e()],1)},staticRenderFns:[]};var S={name:"Students",data:function(){return{profile:{},loading:!1,modules:[],fields:{UID:{label:"UID",sortable:!0},last:{label:"Last Name",sortable:!0},first:{label:"First name",sortable:!1},city:{label:"City",sortable:!0},organisation:{label:"Partner",sortable:!0}}}},methods:{getModules:function(){a.a.functions();this.toggleLoading(),l.a.get("https://hooks.zapier.com/hooks/catch/4921789/jwcqvb/").then(function(t){console.log("Zapier Call: ",t)})},toggleLoading:function(){this.loading=!this.loading}},created:function(){this.getModules()}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("b-table",{attrs:{striped:"",hover:"",small:"",items:this.modules,fields:this.fields}}),this._v(" "),this.loading?e("div",{staticClass:"text-center"},[e("b-spinner",{staticClass:"cuja",attrs:{label:"Spinning"}})],1):this._e()],1)},staticRenderFns:[]};var P={name:"Actions",components:{Students:o("VU/8")(R,$,!1,function(t){o("vP0R")},"data-v-c242c4a0",null).exports,Modules:o("VU/8")(S,A,!1,function(t){o("3wY0")},"data-v-0ed89eb3",null).exports},data:function(){return{courses:[],loading:!1}},computed:{profile:function(){return this.$store.state.profile}},methods:{getCourses:function(){var t=a.a.firestore();this.toggleLoading();var e=this.profile.uid,o=t.collection("users").doc(e),n=this;t.collection("courses").where("instructor","==",o).get().then(function(t){console.log("Snap: ",t.docs[0].data()),t.docs.map(function(t){var e=t.data(),o=e.date_start.toDate(),s=e.date_end.toDate();n.courses.push({Partner:e.partner,title:e.title,location:e.location,"Date Start":o.toLocaleDateString(),"Date End":s.toLocaleDateString(),"Count Students":e.students.length,instructor:n.profile.displayName})}),n.toggleLoading()}).catch(function(t){console.log("Error getting documents: ",t)})},toggleLoading:function(){this.loading=!this.loading}},created:function(){"instructor"!=this.profile.role&&(alert("Access denied"),this.$router.push("/login")),this.getCourses()}},D={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h4",{staticClass:"title"},[t._v("Instructor")]),t._v(" "),o("div",[o("b-tabs",{attrs:{"content-class":"mt-3",align:"center"}},[o("b-tab",{attrs:{title:"Upcoming Courses"}},[o("div",{staticClass:"mt-4 text-left overflow-auto"},[o("button",{staticClass:"btn btn-dark m-2 font-weight-bold text-sm btn-sm",attrs:{type:"button"}},[t._v("Create Course")]),t._v(" "),o("b-table",{attrs:{striped:"",hover:"",items:t.courses}}),t._v(" "),t.loading?o("div",{staticClass:"text-center"},[o("b-spinner",{staticClass:"cuja",attrs:{label:"Spinning"}})],1):t._e()],1)]),t._v(" "),o("b-tab",{attrs:{title:"Modules"}},[o("Modules")],1),t._v(" "),o("b-tab",{attrs:{title:"Students"}},[o("Students")],1)],1)],1)])},staticRenderFns:[]};var I=o("VU/8")(P,D,!1,function(t){o("JjH1")},"data-v-6135e0aa",null).exports,F={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h4",{staticClass:"title"},[this._v("Course")])])}]};var j=o("VU/8")({name:"Course",data:function(){return{}},computed:{profile:function(){return this.$store.state.profile}}},F,!1,function(t){o("BWpV")},"data-v-96085794",null).exports;n.a.use(r.a);var V=new r.a({routes:[{path:"*",redirect:"/login"},{path:"/home",name:"Home",component:v,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:x},{path:"/register",name:"Register",component:E},{path:"/profile",name:"Profile",component:k},{path:"/course",name:"Course",component:j,meta:{requiresAuth:!0}},{path:"/instructor",name:"Instructor",component:I,meta:{requiresAuth:!0}}]});V.beforeEach(function(t,e,o){var n=a.a.auth().currentUser;t.matched.some(function(t){return t.meta.requiresAuth})&&!n?(console.log("Redirect to LOGIN!"),o("login")):o()});var W=V,M=o("NYxO");n.a.use(M.a);var T=new M.a.Store({state:{profile:{}},mutations:{setUser:function(t,e){console.log("Store: ",e),t.profile=e},clearUser:function(t){t.profile={}}},getters:{user:function(t){return t.user}}}),G=o("e6fC"),B=o.n(G);o("Jmt5"),o("9M+g"),o("8sJK");n.a.config.productionTip=!1;a.a.initializeApp({apiKey:"AIzaSyC1A6KItrAPrSWj4WYTukgV913gVLoKIlg",authDomain:"cuja-d9e71.firebaseapp.com",databaseURL:"https://cuja-d9e71.firebaseio.com",projectId:"cuja-d9e71",storageBucket:"cuja-d9e71.appspot.com",messagingSenderId:"741338770706"}),n.a.use(B.a),new n.a({el:"#app",router:W,components:{App:f},template:"<App/>",store:T})},U5p3:function(t,e){},Wwdf:function(t,e){},mLJW:function(t,e){},tZnG:function(t,e){},vP0R:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fb8224ae7208fb333a7c.js.map